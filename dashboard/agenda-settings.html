<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configuraci√≥n de Agenda - ReservasPro</title>
    <link rel="stylesheet" href="../css/mobile-optimization.css">
    <script src="../js/multilanguage.js"></script>
    <style>
        .settings-container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .settings-section {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }
        
        .settings-title {
            color: white;
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .settings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
        }
        
        .setting-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 1.5rem;
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s;
        }
        
        .setting-card:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
        }
        
        .setting-card h4 {
            color: white;
            margin-bottom: 1rem;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .setting-card p {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.875rem;
            margin-bottom: 1rem;
            line-height: 1.5;
        }
        
        .setting-control {
            display: flex;
            align-items: center;
            gap: 1rem;
            flex-wrap: wrap;
        }
        
        .setting-control select {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 0.75rem 1rem;
            border-radius: 10px;
            font-size: 0.875rem;
            min-width: 150px;
        }
        
        .setting-control select option {
            background: #374151;
            color: white;
        }
        
        .setting-control input[type="checkbox"] {
            width: 20px;
            height: 20px;
            accent-color: #1e40af;
        }
        
        .setting-control label {
            color: white;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .preview-section {
            background: rgba(255, 255, 255, 0.1);
            padding: 1.5rem;
            border-radius: 15px;
            margin-top: 1rem;
        }
        
        .preview-title {
            color: white;
            font-weight: 600;
            margin-bottom: 1rem;
        }
        
        .preview-calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 1px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
        }
        
        .preview-day {
            background: rgba(255, 255, 255, 0.1);
            padding: 0.5rem;
            text-align: center;
            color: white;
            font-size: 0.8rem;
            min-height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .preview-day.available {
            background: rgba(16, 185, 129, 0.3);
            border: 1px solid rgba(16, 185, 129, 0.5);
        }
        
        .preview-day.unavailable {
            background: rgba(220, 38, 38, 0.3);
            border: 1px solid rgba(220, 38, 38, 0.5);
        }
        
        .preview-day.today {
            background: rgba(255, 255, 255, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.5);
        }
        
        .status-indicator {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.875rem;
            font-weight: 600;
        }
        
        .status-active {
            background: rgba(16, 185, 129, 0.2);
            color: #10b981;
            border: 1px solid rgba(16, 185, 129, 0.3);
        }
        
        .status-warning {
            background: rgba(245, 158, 11, 0.2);
            color: #f59e0b;
            border: 1px solid rgba(245, 158, 11, 0.3);
        }
        
        .status-error {
            background: rgba(220, 38, 38, 0.2);
            color: #dc2626;
            border: 1px solid rgba(220, 38, 38, 0.3);
        }
        
        .action-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 2rem;
        }
        
        .btn-large {
            padding: 1rem 2rem;
            font-size: 1.1rem;
            border-radius: 15px;
        }
        
        .info-box {
            background: rgba(59, 130, 246, 0.2);
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 12px;
            padding: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .info-box h4 {
            color: #3b82f6;
            margin-bottom: 0.5rem;
            font-size: 1rem;
        }
        
        .info-box p {
            color: rgba(255, 255, 255, 0.9);
            font-size: 0.875rem;
            line-height: 1.5;
        }
        
        @media (max-width: 768px) {
            .settings-grid {
                grid-template-columns: 1fr;
            }
            
            .setting-control {
                flex-direction: column;
                align-items: stretch;
            }
            
            .setting-control select {
                min-width: auto;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .preview-calendar {
                grid-template-columns: repeat(7, 1fr);
            }
            
            .preview-day {
                min-height: 30px;
                font-size: 0.7rem;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <a href="index.html" class="logo">‚öôÔ∏è ReservasPro</a>
        <span style="color: rgba(255, 255, 255, 0.8);" data-translate="nav.settings">Configuraci√≥n</span>
    </header>
    
    <div class="container">
        <div class="settings-container">
            <!-- Informaci√≥n General -->
            <div class="info-box">
                <h4>üí° Informaci√≥n Importante</h4>
                <p>Configura cu√°ntos meses quieres tener abiertos para reservas. Esto afecta tanto a la vista del calendario como a la disponibilidad en el sistema de reservas p√∫blicas.</p>
            </div>
            
            <!-- Configuraci√≥n Principal -->
            <div class="settings-section">
                <h2 class="settings-title">üìÖ <span data-translate="nav.settings">Configuraci√≥n</span></h2>
                
                <div class="settings-grid">
                    <div class="setting-card">
                        <h4>üìÜ Meses de Antelaci√≥n</h4>
                        <p>Define cu√°ntos meses hacia adelante quieres que est√©n disponibles para reservas</p>
                        <div class="setting-control">
                            <select id="monthsAhead" onchange="updateMonthsAhead()">
                                <option value="1">1 mes</option>
                                <option value="2" selected>2 meses</option>
                                <option value="3">3 meses</option>
                                <option value="6">6 meses</option>
                                <option value="12">12 meses</option>
                                <option value="24">24 meses</option>
                            </select>
                        </div>
                        <div class="preview-section">
                            <div class="preview-title">Vista Previa:</div>
                            <div class="preview-calendar" id="previewCalendar">
                                <!-- Generado din√°micamente -->
                            </div>
                        </div>
                    </div>
                    
                    <div class="setting-card">
                        <h4>‚è∞ Horarios de Trabajo</h4>
                        <p>Configura los horarios disponibles para cada d√≠a de la semana</p>
                        <div class="setting-control">
                            <label>
                                <input type="checkbox" id="enableCustomHours" onchange="toggleCustomHours()">
                                Habilitar horarios personalizados
                            </label>
                        </div>
                        <div id="customHoursSection" style="display: none;">
                            <div class="setting-control">
                                <label>Horario por defecto:</label>
                                <select id="defaultStartTime">
                                    <option value="09:00">09:00</option>
                                    <option value="08:00">08:00</option>
                                    <option value="10:00">10:00</option>
                                </select>
                                <select id="defaultEndTime">
                                    <option value="18:00">18:00</option>
                                    <option value="17:00">17:00</option>
                                    <option value="19:00">19:00</option>
                                    <option value="20:00">20:00</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <div class="setting-card">
                        <h4>üì± Optimizaci√≥n M√≥vil</h4>
                        <p>Configura la experiencia m√≥vil para tus clientes</p>
                        <div class="setting-control">
                            <label>
                                <input type="checkbox" id="mobileOptimized" checked onchange="toggleMobileOptimization()">
                                Optimizaci√≥n m√≥vil activa
                            </label>
                        </div>
                        <div class="setting-control">
                            <label>
                                <input type="checkbox" id="touchFriendly" checked onchange="toggleTouchFriendly()">
                                Interfaz t√°ctil optimizada
                            </label>
                        </div>
                    </div>
                    
                    <div class="setting-card">
                        <h4>üé® Tema Visual</h4>
                        <p>Personaliza la apariencia del calendario</p>
                        <div class="setting-control">
                            <select id="theme" onchange="updateTheme()">
                                <option value="glass" selected>Cristal L√≠quido</option>
                                <option value="modern">Moderno</option>
                                <option value="minimal">Minimalista</option>
                                <option value="dark">Oscuro</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="setting-card">
                        <h4>üîî Notificaciones</h4>
                        <p>Configura las notificaciones autom√°ticas</p>
                        <div class="setting-control">
                            <label>
                                <input type="checkbox" id="emailNotifications" checked onchange="toggleEmailNotifications()">
                                Notificaciones por email
                            </label>
                        </div>
                        <div class="setting-control">
                            <label>
                                <input type="checkbox" id="smsNotifications" onchange="toggleSmsNotifications()">
                                Notificaciones por SMS
                            </label>
                        </div>
                    </div>
                    
                    <div class="setting-card">
                        <h4>üìä Estad√≠sticas</h4>
                        <p>Configura el seguimiento de m√©tricas</p>
                        <div class="setting-control">
                            <label>
                                <input type="checkbox" id="trackAnalytics" checked onchange="toggleAnalytics()">
                                Seguimiento de analytics
                            </label>
                        </div>
                        <div class="setting-control">
                            <label>
                                <input type="checkbox" id="exportData" onchange="toggleDataExport()">
                                Permitir exportaci√≥n de datos
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Estado Actual -->
            <div class="settings-section">
                <h2 class="settings-title">üìä Estado Actual</h2>
                
                <div class="settings-grid">
                    <div class="setting-card">
                        <h4>üìÖ Configuraci√≥n Activa</h4>
                        <div id="currentStatus">
                            <div class="status-indicator status-active">
                                <span>‚úÖ</span>
                                <span>Agenda configurada para 2 meses</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="setting-card">
                        <h4>üì± Dispositivos</h4>
                        <div id="deviceStatus">
                            <div class="status-indicator status-active">
                                <span>üì±</span>
                                <span>Optimizaci√≥n m√≥vil activa</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="setting-card">
                        <h4>üé® Tema</h4>
                        <div id="themeStatus">
                            <div class="status-indicator status-active">
                                <span>‚ú®</span>
                                <span>Cristal L√≠quido activo</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="setting-card">
                        <h4>üîî Notificaciones</h4>
                        <div id="notificationStatus">
                            <div class="status-indicator status-warning">
                                <span>‚ö†Ô∏è</span>
                                <span>Email activo, SMS inactivo</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Acciones -->
            <div class="action-buttons">
                <button class="btn btn-primary btn-large" onclick="saveSettings()">üíæ <span data-translate="btn.save">Guardar</span></button>
                <button class="btn btn-secondary btn-large" onclick="resetSettings()">üîÑ <span data-translate="btn.reset">Restablecer</span></button>
                <button class="btn btn-success btn-large" onclick="testConfiguration()">üß™ <span data-translate="btn.search">Buscar</span></button>
            </div>
        </div>
    </div>
    
    <script>
        let settings = {
            monthsAhead: 2,
            customHours: false,
            defaultStartTime: '09:00',
            defaultEndTime: '18:00',
            mobileOptimized: true,
            touchFriendly: true,
            theme: 'glass',
            emailNotifications: true,
            smsNotifications: false,
            trackAnalytics: true,
            exportData: false
        };
        
        // Cargar configuraci√≥n al iniciar
        document.addEventListener('DOMContentLoaded', function() {
            loadSettings();
            updatePreview();
            updateStatus();
        });
        
        function loadSettings() {
            const savedSettings = localStorage.getItem('agendaSettings');
            if (savedSettings) {
                settings = { ...settings, ...JSON.parse(savedSettings) };
            }
            
            // Aplicar configuraci√≥n a los controles
            document.getElementById('monthsAhead').value = settings.monthsAhead;
            document.getElementById('enableCustomHours').checked = settings.customHours;
            document.getElementById('defaultStartTime').value = settings.defaultStartTime;
            document.getElementById('defaultEndTime').value = settings.defaultEndTime;
            document.getElementById('mobileOptimized').checked = settings.mobileOptimized;
            document.getElementById('touchFriendly').checked = settings.touchFriendly;
            document.getElementById('theme').value = settings.theme;
            document.getElementById('emailNotifications').checked = settings.emailNotifications;
            document.getElementById('smsNotifications').checked = settings.smsNotifications;
            document.getElementById('trackAnalytics').checked = settings.trackAnalytics;
            document.getElementById('exportData').checked = settings.exportData;
            
            // Mostrar/ocultar secciones
            document.getElementById('customHoursSection').style.display = settings.customHours ? 'block' : 'none';
        }
        
        function updateMonthsAhead() {
            settings.monthsAhead = parseInt(document.getElementById('monthsAhead').value);
            updatePreview();
            updateStatus();
        }
        
        function toggleCustomHours() {
            settings.customHours = document.getElementById('enableCustomHours').checked;
            document.getElementById('customHoursSection').style.display = settings.customHours ? 'block' : 'none';
            updateStatus();
        }
        
        function toggleMobileOptimization() {
            settings.mobileOptimized = document.getElementById('mobileOptimized').checked;
            updateStatus();
        }
        
        function toggleTouchFriendly() {
            settings.touchFriendly = document.getElementById('touchFriendly').checked;
            updateStatus();
        }
        
        function updateTheme() {
            settings.theme = document.getElementById('theme').value;
            applyTheme();
            updateStatus();
        }
        
        function toggleEmailNotifications() {
            settings.emailNotifications = document.getElementById('emailNotifications').checked;
            updateStatus();
        }
        
        function toggleSmsNotifications() {
            settings.smsNotifications = document.getElementById('smsNotifications').checked;
            updateStatus();
        }
        
        function toggleAnalytics() {
            settings.trackAnalytics = document.getElementById('trackAnalytics').checked;
            updateStatus();
        }
        
        function toggleDataExport() {
            settings.exportData = document.getElementById('exportData').checked;
            updateStatus();
        }
        
        function applyTheme() {
            document.body.className = '';
            document.body.classList.add(settings.theme);
        }
        
        function updatePreview() {
            const preview = document.getElementById('previewCalendar');
            preview.innerHTML = '';
            
            // Headers de d√≠as
            const dayHeaders = ['Dom', 'Lun', 'Mar', 'Mi√©', 'Jue', 'Vie', 'S√°b'];
            dayHeaders.forEach(day => {
                const header = document.createElement('div');
                header.className = 'preview-day';
                header.textContent = day;
                preview.appendChild(header);
            });
            
            // Generar d√≠as del mes actual
            const today = new Date();
            const daysInMonth = new Date(today.getFullYear(), today.getMonth() + 1, 0).getDate();
            const firstDay = new Date(today.getFullYear(), today.getMonth(), 1).getDay();
            
            // D√≠as del mes anterior
            for (let i = firstDay - 1; i >= 0; i--) {
                const day = document.createElement('div');
                day.className = 'preview-day unavailable';
                day.textContent = '';
                preview.appendChild(day);
            }
            
            // D√≠as del mes actual
            for (let day = 1; day <= daysInMonth; day++) {
                const dayEl = document.createElement('div');
                dayEl.className = 'preview-day available';
                dayEl.textContent = day;
                
                if (day === today.getDate()) {
                    dayEl.classList.add('today');
                }
                
                preview.appendChild(dayEl);
            }
            
            // D√≠as del mes siguiente (si es necesario)
            const remainingCells = 42 - (firstDay + daysInMonth);
            for (let day = 1; day <= remainingCells; day++) {
                const dayEl = document.createElement('div');
                dayEl.className = 'preview-day unavailable';
                dayEl.textContent = '';
                preview.appendChild(dayEl);
            }
        }
        
        function updateStatus() {
            // Actualizar estado de meses
            const monthsStatus = document.querySelector('#currentStatus .status-indicator');
            monthsStatus.innerHTML = `
                <span>‚úÖ</span>
                <span>Agenda configurada para ${settings.monthsAhead} ${settings.monthsAhead === 1 ? 'mes' : 'meses'}</span>
            `;
            
            // Actualizar estado de dispositivos
            const deviceStatus = document.querySelector('#deviceStatus .status-indicator');
            if (settings.mobileOptimized && settings.touchFriendly) {
                deviceStatus.className = 'status-indicator status-active';
                deviceStatus.innerHTML = `
                    <span>üì±</span>
                    <span>Optimizaci√≥n m√≥vil completa</span>
                `;
            } else if (settings.mobileOptimized) {
                deviceStatus.className = 'status-indicator status-warning';
                deviceStatus.innerHTML = `
                    <span>‚ö†Ô∏è</span>
                    <span>Optimizaci√≥n m√≥vil parcial</span>
                `;
            } else {
                deviceStatus.className = 'status-indicator status-error';
                deviceStatus.innerHTML = `
                    <span>‚ùå</span>
                    <span>Optimizaci√≥n m√≥vil desactivada</span>
                `;
            }
            
            // Actualizar estado del tema
            const themeStatus = document.querySelector('#themeStatus .status-indicator');
            const themeNames = {
                glass: 'Cristal L√≠quido',
                modern: 'Moderno',
                minimal: 'Minimalista',
                dark: 'Oscuro'
            };
            themeStatus.innerHTML = `
                <span>‚ú®</span>
                <span>${themeNames[settings.theme]} activo</span>
            `;
            
            // Actualizar estado de notificaciones
            const notificationStatus = document.querySelector('#notificationStatus .status-indicator');
            if (settings.emailNotifications && settings.smsNotifications) {
                notificationStatus.className = 'status-indicator status-active';
                notificationStatus.innerHTML = `
                    <span>‚úÖ</span>
                    <span>Email y SMS activos</span>
                `;
            } else if (settings.emailNotifications) {
                notificationStatus.className = 'status-indicator status-warning';
                notificationStatus.innerHTML = `
                    <span>‚ö†Ô∏è</span>
                    <span>Email activo, SMS inactivo</span>
                `;
            } else {
                notificationStatus.className = 'status-indicator status-error';
                notificationStatus.innerHTML = `
                    <span>‚ùå</span>
                    <span>Notificaciones desactivadas</span>
                `;
            }
        }
        
        function saveSettings() {
            // Guardar configuraci√≥n
            localStorage.setItem('agendaSettings', JSON.stringify(settings));
            localStorage.setItem('monthsAhead', settings.monthsAhead);
            localStorage.setItem('theme', settings.theme);
            localStorage.setItem('mobileOptimized', settings.mobileOptimized);
            
            showNotification('Configuraci√≥n guardada correctamente', 'success');
        }
        
        function resetSettings() {
            if (confirm('¬øEst√°s seguro de que quieres restaurar la configuraci√≥n por defecto?')) {
                settings = {
                    monthsAhead: 2,
                    customHours: false,
                    defaultStartTime: '09:00',
                    defaultEndTime: '18:00',
                    mobileOptimized: true,
                    touchFriendly: true,
                    theme: 'glass',
                    emailNotifications: true,
                    smsNotifications: false,
                    trackAnalytics: true,
                    exportData: false
                };
                
                loadSettings();
                updatePreview();
                updateStatus();
                
                showNotification('Configuraci√≥n restaurada por defecto', 'success');
            }
        }
        
        function testConfiguration() {
            showNotification('Probando configuraci√≥n...', 'info');
            
            setTimeout(() => {
                // Simular prueba de configuraci√≥n
                const testResults = {
                    monthsAhead: settings.monthsAhead,
                    mobileOptimized: settings.mobileOptimized,
                    theme: settings.theme,
                    notifications: settings.emailNotifications || settings.smsNotifications
                };
                
                console.log('Resultados de la prueba:', testResults);
                showNotification('Configuraci√≥n probada correctamente', 'success');
            }, 2000);
        }
        
        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.classList.add('show');
            }, 100);
            
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => {
                    notification.remove();
                }, 300);
            }, 3000);
        }
    </script>
</body>
</html>
